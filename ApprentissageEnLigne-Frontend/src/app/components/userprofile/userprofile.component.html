<app-header></app-header>
<app-user-side-bar></app-user-side-bar>
<div class="row" id="profilecard">
    <div *ngFor="let user of profileDetails | async" id="bloodCards">
        <a><img *ngIf="user.gender === 'Homme' || user.gender === 'Homme' || user.gender === 'M'" class="bloodimg"
                [src]="'assets/img/maleuser.png'" width="140" height="140"></a>
        <a><img *ngIf="user.gender === 'Femme' || user.gender === 'Femme' || user.gender === 'F'" class="bloodimg"
                [src]="'assets/img/girl.png'" width="140" height="140"></a>
        <div class="card-block">
            <div class="text"><small
                    style="font-size: smaller; margin-left: 6%; padding: 3px 8px 3px 8px; background-color: gray; border-radius: 10px; font-weight: bold; width: 55%; color: white;">
                    <i *ngIf="user.gender === 'Femme'" class='fa fa-venus'></i>
                    <i *ngIf="user.gender === 'Homme'" class='fa fa-mars'></i> {{user.username}}</small>
            </div>
            <div class="text"><b class="element" style="margin-left: 6%;"><i class='fa fa-graduation-cap'></i>
                    {{user.level}}</b> </div>
            <div class="text"><b class="element" style="margin-left: 6%;"><i class='fa fa-university'></i>
                    {{user.univ}}</b> </div>
            <div class="text"><b class="element" style="margin-left: 6%;"><i class='fa fa-paperclip'></i>
                    Domaine de {{user.profession}}</b> </div>

            <div class="text"><b class="element" style="margin-left: 6%;"><i class='fa fa-phone'></i>
                    {{user.mobile}}</b> </div>

            <div class="text"><b class="element" style="margin-left: 6%;"><i class="fa fa-envelope-o "></i>
                    {{user.email}}</b> </div>
            <div class="text"><b class="element" style="margin-left: 6%;"><i class="fa fa-thumb-tack "></i>
                    {{user.address}}</b> </div>
            <div class="btndiv" style="align-items: center;"><button class="editbtn" (click)="editProfile()"><i
                        class="fa fa-edit"></i> Modifier</button></div>
            <small id="message" *ngIf="temp === true" style="text-align: center; margin-top: 3%; color: green;"><b>Le
                    profil a été modifié avec succès.
                </b></small>
        </div>
    </div>
</div>



<div class="container register" id="profileform">
    <div class="row">
        <div class="col-md-9 register-right">
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                    <h3 class="textual">Modifier les informations de votre profil</h3>
                    <small *ngIf="temp === false"
                        style="font-weight: bold; margin-left: 25%; text-align: center; color: grey;"><b>
                            {{user.username}}, Modifier votre profil ici</b></small>
                    <small *ngIf="temp === true" style="text-align: center; color: green;"><b>Profil mis à jour avec
                            succès.</b></small>
                    <form #Updateform="ngForm" style="margin-top: -15%;" (ngSubmit)="updateUserProfile()">
                        <div class="row register-form">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Nom *" name="username"
                                        [(ngModel)]="user.username" readonly #username="ngModel">

                                </div>
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Sexe *" name="usergender"
                                        [(ngModel)]="user.gender" readonly #usergender="ngModel">

                                </div>
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Votre domaine *"
                                        name="userprofession" [(ngModel)]="user.profession" required
                                        #userprofession="ngModel"
                                        [class.is-invalid]="userprofession.invalid && userprofession.touched">
                                    <small class="text-danger"
                                        [class.d-none]="userprofession.valid || userprofession.untouched"><b>Champ
                                            obligatoire</b></small>
                                </div>

                                <div class="form-group">
                                    <select class="form-select" name="useruniv" [(ngModel)]="user.univ" required
                                        #useruniv="ngModel" [class.is-invalid]="useruniv.invalid && useruniv.touched">
                                        <option value="" disabled selected>Votre université *</option>
                                        <option value="Cadi Ayyad">Cadi Ayyad</option>
                                        <option value="Mohammed V de Rabat">Mohammed V de Rabat</option>
                                        <option value="Hassan II de Casablanca">Hassan II de Casablanca</option>
                                        <option value="Mohammed Premier d'Oujda">Mohammed Premier d'Oujda</option>
                                        <option value="Ibn Tofail de Kenitra">Ibn Tofail de Kenitra</option>
                                        <option value="Sidi Mohamed Ben Abdellah de Fès">Sidi Mohamed Ben Abdellah
                                            de Fès</option>
                                        <option value="Abdelmalek Essaâdi de Tanger">Abdelmalek Essaâdi de Tanger
                                        </option>
                                        <option value="Ibn Zohr d'Agadir">Ibn Zohr d'Agadir</option>
                                        <option value="Chouaib Doukkali d'El Jadida">Chouaib Doukkali d'El Jadida
                                        </option>
                                        <option value="Moulay Ismail de Meknès">Moulay Ismail de Meknès</option>
                                        <option value="Sultan Moulay Slimane de Béni Mellal">Sultan Moulay Slimane
                                            de Béni Mellal</option>
                                        <option value="Hassan Premier de Settat">Hassan Premier de Settat</option>
                                        <option value="Mohammed VI Polytechnique de Benguerir">Mohammed VI
                                            Polytechnique de Benguerir</option>
                                        <option value="À l'étranger">À l'étranger</option>
                                        <option value="Autre">Autre</option>
                                    </select>
                                    <small class="text-danger"
                                        [class.d-none]="useruniv.valid || useruniv.untouched"><b>Champ
                                            obligatoire</b></small>
                                </div>
                                <div class="form-group">
                                    <input type="password" class="form-control" placeholder="Mot de passe *" name="pwd"
                                        [(ngModel)]="user.password" required #userpassword="ngModel"
                                        [class.is-invalid]="userpassword.invalid && userpassword.touched">
                                    <div *ngIf="userpassword.errors && userpassword.invalid && userpassword.touched">
                                        <small class="text-danger" *ngIf="userpassword.errors.required"><b>Champ
                                                obligatoire</b></small>
                                    </div>
                                    <small style="color: gray; font-size: 10px;"></small>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <input type="email" class="form-control" placeholder="Adresse email *"
                                        name="useremail" [(ngModel)]="user.email" readonly>

                                </div>
                                <div class="form-group">
                                    <input type="tel" maxlength="10" minlength="10" class="form-control"
                                        placeholder="Téléphone *" name="usermobile" [(ngModel)]="user.mobile" required
                                        #usermobile="ngModel"
                                        [class.is-invalid]="usermobile.invalid && usermobile.touched">
                                    <small class="text-danger"
                                        [class.d-none]="usermobile.valid || usermobile.untouched"><b>Champ
                                            obligatoire</b></small>
                                </div>
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Adresse *" name="useraddress"
                                        [(ngModel)]="user.address" required #useraddress="ngModel"
                                        [class.is-invalid]="useraddress.invalid && useraddress.touched">
                                    <small class="text-danger"
                                        [class.d-none]="useraddress.valid || useraddress.untouched"><b>Champ
                                            obligatoire</b></small>
                                </div>
                                <div class="form-group">
                                    <input type="password" class="form-control"
                                        placeholder="Confirmer le mot de passe *" name="ConfirmPassword"
                                        (ngModel)="user.password" required #userconfirmPassword="ngModel"
                                        [class.is-invalid]="userconfirmPassword.invalid && userconfirmPassword.touched">
                                    <small class="text-danger"
                                        [class.d-none]="(userconfirmPassword.value == userpassword.value) || userconfirmPassword.untouched"><b>Les
                                            mots de passe saisis ne correspondent pas.</b></small>
                                </div>
                            </div>
                        </div>
                        <button [disabled]="Updateform.form.invalid" type="submit"
                            class="btn registerbtn">Modifier</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>